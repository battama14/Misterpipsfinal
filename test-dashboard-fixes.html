<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Test des Corrections Dashboard</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            background: #0a0a0a;\n            color: white;\n            padding: 20px;\n            line-height: 1.6;\n        }\n        .test-section {\n            background: rgba(20, 20, 20, 0.8);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            border-radius: 10px;\n            padding: 20px;\n            margin: 20px 0;\n        }\n        .test-button {\n            background: linear-gradient(135deg, #00d4ff, #5b86e5);\n            color: white;\n            border: none;\n            padding: 10px 20px;\n            border-radius: 8px;\n            cursor: pointer;\n            margin: 5px;\n            font-weight: 600;\n        }\n        .test-button:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);\n        }\n        .status {\n            padding: 10px;\n            border-radius: 5px;\n            margin: 10px 0;\n        }\n        .status.success {\n            background: rgba(76, 175, 80, 0.2);\n            border: 1px solid #4caf50;\n            color: #4caf50;\n        }\n        .status.error {\n            background: rgba(244, 67, 54, 0.2);\n            border: 1px solid #f44336;\n            color: #f44336;\n        }\n        .status.warning {\n            background: rgba(255, 193, 7, 0.2);\n            border: 1px solid #ffc107;\n            color: #ffc107;\n        }\n        .log {\n            background: #1a1a1a;\n            border: 1px solid #333;\n            border-radius: 5px;\n            padding: 15px;\n            max-height: 300px;\n            overflow-y: auto;\n            font-family: monospace;\n            font-size: 12px;\n        }\n    </style>\n</head>\n<body>\n    <h1>üîß Test des Corrections Dashboard PC</h1>\n    \n    <div class=\"test-section\">\n        <h2>üìä √âtat des Scripts</h2>\n        <div id=\"scriptsStatus\"></div>\n        <button class=\"test-button\" onclick=\"checkScripts()\">V√©rifier les Scripts</button>\n    </div>\n    \n    <div class=\"test-section\">\n        <h2>üîò Test des Boutons</h2>\n        <div id=\"buttonsStatus\"></div>\n        <button class=\"test-button\" onclick=\"testButtons()\">Tester les Boutons</button>\n        <button class=\"test-button\" onclick=\"fixButtons()\">Corriger les Boutons</button>\n    </div>\n    \n    <div class=\"test-section\">\n        <h2>üîí Test des Modales</h2>\n        <div id=\"modalsStatus\"></div>\n        <button class=\"test-button\" onclick=\"testModals()\">Tester les Modales</button>\n        <button class=\"test-button\" onclick=\"fixModals()\">Corriger les Modales</button>\n    </div>\n    \n    <div class=\"test-section\">\n        <h2>üìÖ Test du Calendrier</h2>\n        <div id=\"calendarStatus\"></div>\n        <button class=\"test-button\" onclick=\"testCalendar()\">Tester le Calendrier</button>\n        <button class=\"test-button\" onclick=\"forceCalendarUpdate()\">Forcer Mise √† Jour</button>\n    </div>\n    \n    <div class=\"test-section\">\n        <h2>üîÑ Actions Rapides</h2>\n        <button class=\"test-button\" onclick=\"fixAll()\">üîß Corriger Tout</button>\n        <button class=\"test-button\" onclick=\"reloadDashboard()\">üîÑ Recharger Dashboard</button>\n        <button class=\"test-button\" onclick=\"clearLogs()\">üóëÔ∏è Effacer Logs</button>\n    </div>\n    \n    <div class=\"test-section\">\n        <h2>üìù Logs de Test</h2>\n        <div id=\"testLogs\" class=\"log\"></div>\n    </div>\n    \n    <script>\n        let logs = [];\n        \n        function log(message, type = 'info') {\n            const timestamp = new Date().toLocaleTimeString();\n            const logEntry = `[${timestamp}] ${message}`;\n            logs.push(logEntry);\n            \n            const logsDiv = document.getElementById('testLogs');\n            if (logsDiv) {\n                logsDiv.innerHTML = logs.slice(-50).join('\\n');\n                logsDiv.scrollTop = logsDiv.scrollHeight;\n            }\n            \n            console.log(logEntry);\n        }\n        \n        function showStatus(elementId, message, type) {\n            const element = document.getElementById(elementId);\n            if (element) {\n                element.innerHTML = `<div class=\"status ${type}\">${message}</div>`;\n            }\n        }\n        \n        function checkScripts() {\n            log('üîç V√©rification des scripts...');\n            \n            const scripts = [\n                { name: 'Dashboard', check: () => window.dashboard },\n                { name: 'Dashboard Fixer', check: () => window.dashboardFixer },\n                { name: 'Modal Fixer', check: () => window.modalFixer },\n                { name: 'Calendar Fixer', check: () => window.calendarFixer },\n                { name: 'Close Modal', check: () => window.closeModal },\n                { name: 'Force Calendar Update', check: () => window.forceCalendarUpdate }\n            ];\n            \n            let allGood = true;\n            let status = '<h3>√âtat des Scripts:</h3>';\n            \n            scripts.forEach(script => {\n                const exists = script.check();\n                const statusIcon = exists ? '‚úÖ' : '‚ùå';\n                const statusText = exists ? 'OK' : 'MANQUANT';\n                \n                status += `<p>${statusIcon} ${script.name}: ${statusText}</p>`;\n                \n                if (!exists) {\n                    allGood = false;\n                    log(`‚ùå Script manquant: ${script.name}`, 'error');\n                } else {\n                    log(`‚úÖ Script OK: ${script.name}`, 'success');\n                }\n            });\n            \n            showStatus('scriptsStatus', status, allGood ? 'success' : 'error');\n            \n            if (allGood) {\n                log('‚úÖ Tous les scripts sont charg√©s', 'success');\n            } else {\n                log('‚ùå Certains scripts sont manquants', 'error');\n            }\n        }\n        \n        function testButtons() {\n            log('üîò Test des boutons...');\n            \n            const buttons = [\n                'newTradeBtn',\n                'settingsBtn', \n                'closeTradeBtn',\n                'exportBtn',\n                'historyTradeBtn',\n                'addAccountBtn',\n                'deleteAccountBtn'\n            ];\n            \n            let workingButtons = 0;\n            let status = '<h3>√âtat des Boutons:</h3>';\n            \n            buttons.forEach(buttonId => {\n                const button = document.getElementById(buttonId);\n                const exists = !!button;\n                const hasHandler = button && (button.onclick || button.addEventListener);\n                \n                const statusIcon = exists && hasHandler ? '‚úÖ' : '‚ùå';\n                const statusText = exists ? (hasHandler ? 'OK' : 'PAS D\\'√âV√âNEMENT') : 'INTROUVABLE';\n                \n                status += `<p>${statusIcon} ${buttonId}: ${statusText}</p>`;\n                \n                if (exists && hasHandler) {\n                    workingButtons++;\n                    log(`‚úÖ Bouton OK: ${buttonId}`, 'success');\n                } else {\n                    log(`‚ùå Probl√®me bouton: ${buttonId} - ${statusText}`, 'error');\n                }\n            });\n            \n            const allWorking = workingButtons === buttons.length;\n            showStatus('buttonsStatus', status, allWorking ? 'success' : 'error');\n            \n            log(`üìä Boutons fonctionnels: ${workingButtons}/${buttons.length}`, allWorking ? 'success' : 'warning');\n        }\n        \n        function testModals() {\n            log('üîí Test des modales...');\n            \n            const modals = ['tradeModal', 'fullscreenModal'];\n            let status = '<h3>√âtat des Modales:</h3>';\n            \n            modals.forEach(modalId => {\n                const modal = document.getElementById(modalId);\n                const exists = !!modal;\n                \n                const statusIcon = exists ? '‚úÖ' : '‚ùå';\n                const statusText = exists ? 'TROUV√âE' : 'INTROUVABLE';\n                \n                status += `<p>${statusIcon} ${modalId}: ${statusText}</p>`;\n                \n                if (exists) {\n                    log(`‚úÖ Modale trouv√©e: ${modalId}`, 'success');\n                } else {\n                    log(`‚ùå Modale manquante: ${modalId}`, 'error');\n                }\n            });\n            \n            // Test des fonctions de fermeture\n            const closeFunctions = ['closeModal', 'closeFullscreen'];\n            closeFunctions.forEach(funcName => {\n                const exists = typeof window[funcName] === 'function';\n                const statusIcon = exists ? '‚úÖ' : '‚ùå';\n                const statusText = exists ? 'OK' : 'MANQUANTE';\n                \n                status += `<p>${statusIcon} ${funcName}: ${statusText}</p>`;\n                \n                if (exists) {\n                    log(`‚úÖ Fonction OK: ${funcName}`, 'success');\n                } else {\n                    log(`‚ùå Fonction manquante: ${funcName}`, 'error');\n                }\n            });\n            \n            showStatus('modalsStatus', status, 'info');\n        }\n        \n        function testCalendar() {\n            log('üìÖ Test du calendrier...');\n            \n            const calendarElements = [\n                'calendarGrid',\n                'monthYear',\n                'prevMonth',\n                'nextMonth'\n            ];\n            \n            let status = '<h3>√âtat du Calendrier:</h3>';\n            let foundElements = 0;\n            \n            calendarElements.forEach(elementId => {\n                const element = document.getElementById(elementId);\n                const exists = !!element;\n                \n                const statusIcon = exists ? '‚úÖ' : '‚ùå';\n                const statusText = exists ? 'TROUV√â' : 'INTROUVABLE';\n                \n                status += `<p>${statusIcon} ${elementId}: ${statusText}</p>`;\n                \n                if (exists) {\n                    foundElements++;\n                    log(`‚úÖ √âl√©ment calendrier OK: ${elementId}`, 'success');\n                } else {\n                    log(`‚ùå √âl√©ment calendrier manquant: ${elementId}`, 'error');\n                }\n            });\n            \n            // Test des fonctions de calendrier\n            const calendarFunctions = ['forceCalendarUpdate', 'updateCalendarAfterTrade'];\n            calendarFunctions.forEach(funcName => {\n                const exists = typeof window[funcName] === 'function';\n                const statusIcon = exists ? '‚úÖ' : '‚ùå';\n                const statusText = exists ? 'OK' : 'MANQUANTE';\n                \n                status += `<p>${statusIcon} ${funcName}: ${statusText}</p>`;\n                \n                if (exists) {\n                    log(`‚úÖ Fonction calendrier OK: ${funcName}`, 'success');\n                } else {\n                    log(`‚ùå Fonction calendrier manquante: ${funcName}`, 'error');\n                }\n            });\n            \n            const allGood = foundElements === calendarElements.length;\n            showStatus('calendarStatus', status, allGood ? 'success' : 'warning');\n            \n            log(`üìä √âl√©ments calendrier: ${foundElements}/${calendarElements.length}`, allGood ? 'success' : 'warning');\n        }\n        \n        function fixButtons() {\n            log('üîß Correction des boutons...');\n            \n            if (window.fixDashboard) {\n                window.fixDashboard();\n                log('‚úÖ Correction des boutons lanc√©e', 'success');\n            } else if (window.dashboardFixer) {\n                window.dashboardFixer.applyFixes();\n                log('‚úÖ Correction via dashboardFixer', 'success');\n            } else {\n                log('‚ùå Aucun correcteur de boutons disponible', 'error');\n            }\n            \n            setTimeout(() => testButtons(), 1000);\n        }\n        \n        function fixModals() {\n            log('üîí Correction des modales...');\n            \n            if (window.fixModals) {\n                window.fixModals();\n                log('‚úÖ Correction des modales lanc√©e', 'success');\n            } else if (window.modalFixer) {\n                window.modalFixer.setupModalFixes();\n                log('‚úÖ Correction via modalFixer', 'success');\n            } else {\n                log('‚ùå Aucun correcteur de modales disponible', 'error');\n            }\n            \n            setTimeout(() => testModals(), 1000);\n        }\n        \n        function fixAll() {\n            log('üîß Correction compl√®te...');\n            \n            fixButtons();\n            setTimeout(() => fixModals(), 500);\n            setTimeout(() => {\n                if (window.forceCalendarUpdate) {\n                    window.forceCalendarUpdate();\n                    log('‚úÖ Mise √† jour du calendrier lanc√©e', 'success');\n                }\n            }, 1000);\n            \n            setTimeout(() => {\n                checkScripts();\n                testButtons();\n                testModals();\n                testCalendar();\n                log('‚úÖ Correction compl√®te termin√©e', 'success');\n            }, 2000);\n        }\n        \n        function reloadDashboard() {\n            log('üîÑ Rechargement du dashboard...');\n            window.location.href = 'dashboard.html';\n        }\n        \n        function clearLogs() {\n            logs = [];\n            document.getElementById('testLogs').innerHTML = '';\n            log('üóëÔ∏è Logs effac√©s');\n        }\n        \n        // Auto-test au chargement\n        window.addEventListener('load', () => {\n            setTimeout(() => {\n                log('üöÄ Test automatique au chargement...');\n                checkScripts();\n                testButtons();\n                testModals();\n                testCalendar();\n            }, 1000);\n        });\n    </script>\n</body>\n</html>